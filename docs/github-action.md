<!--
GENERATED FILE - DO NOT EDIT
This file was generated by [MarkdownSnippets](https://github.com/SimonCropp/MarkdownSnippets).
Source File: /docs/mdsource/github-action.source.md
To change this file edit the source file and then run MarkdownSnippets.
-->

# GitHub Actions

Markdown snippets can be run inside a [GitHub Action](https://help.github.com/en/actions) by installing and using [MarkdownSnippets.Tool](/readme.md#installation). This can be useful to ensure md docs are in sync when .source files are edited online, and without needing to re-generate the docs locally.

Add the following to `.github\workflows\on-push-do-doco.yml` in the target repository.

<!-- snippet: on-push-do-docs.yml -->
<a id='d74f0784'></a>
```yml
name: on-push-do-docs
on:
  push:
jobs:
  docs:
    runs-on: ubuntu-20.04
    steps:
    - uses: actions/checkout@v2
    - name: Run MarkdownSnippets
      run: |
        dotnet tool install --global MarkdownSnippets.Tool
        mdsnippets ${GITHUB_WORKSPACE}
      shell: bash
    - name: Push changes
      run: |
        git config --local user.email "action@github.com"
        git config --local user.name "GitHub Action"
        git commit -m "Docs changes" -a  || echo "nothing to commit"
        remote="https://${GITHUB_ACTOR}:${{secrets.GITHUB_TOKEN}}@github.com/${GITHUB_REPOSITORY}.git"
        branch="${GITHUB_REF:11}"
        git push "${remote}" ${branch} || echo "nothing to push"
      shell: bash
```
<sup><a href='/docs/on-push-do-docs.yml#L1-L22' title='Snippet source file'>snippet source</a> | <a href='#d74f0784' title='Start of snippet'>anchor</a></sup>
<!-- endSnippet -->

This action performs the following tasks:

 * Use the [Checkout Action](https://github.com/marketplace/actions/checkout) to pull down the source
 * Install the MarkdownSnippets dotnet tool
 * Run MarkdownSnippets against the current directory
 * Push any changes back to GitHub


## More Info

 * [Software installed on GitHub-hosted runners](https://help.github.com/en/actions/automating-your-workflow-with-github-actions/software-installed-on-github-hosted-runners)
